# வேலைகள் ஸ்கிரிப்ட்கள்

இந்த அடைவு வேலைகள் பொருட்களின் தரம் மற்றும் ஒரே மாதிரியான தன்மையை பராமரிக்க பயன்படுத்தப்படும் தானியக்க மற்றும் ஆதரவு ஸ்கிரிப்ட்களை கொண்டுள்ளது.

## உள்ளடக்கம்

| கோப்பு | நோக்கம் |
|-------|---------|
| `lint_markdown_cli.py` | பழைய Foundry Local CLI கட்டளா முறைகளை தடுக்கும் வகையில் Markdown கோட்புலங்களை சரிபார்க்கிறது. |
| `export_benchmark_markdown.py` | பல மாடல் தாமத அளவீட்டை இயக்கி Markdown + JSON அறிக்கைகளை வெளியிடுகிறது. |

## 1. Markdown CLI முறை சரிபார்ப்பான்

`lint_markdown_cli.py` அனைத்து மொழிபெயர்ப்பு அல்லாத `.md` கோப்புகளை **கோட்புலங்களுக்குள்** (``` ... ```) அனுமதிக்கப்படாத Foundry Local CLI முறைகளுக்காக ஸ்கேன் செய்கிறது. தகவல் உரை பழைய கட்டளைகளை வரலாற்று சூழலில் குறிப்பிடலாம்.

### பழைய முறைகள் (கோட்புலங்களுக்குள் தடுப்பது)

சரிபார்ப்பான் பழைய CLI முறைகளை தடுக்கும். அதற்குப் பதிலாக நவீன மாற்றங்களைப் பயன்படுத்தவும்.

### தேவையான மாற்றங்கள்
| பழைய | மாற்றாக பயன்படுத்தவும் |
|------|-----------------------|
| `foundry model chat <a> "..."` | `foundry model run <a> --prompt "..."` |
| `foundry model list --running` | `foundry model list` |
| `foundry model list --cached` | `foundry cache list` |
| `foundry model stats` | அளவீட்டு ஸ்கிரிப்ட் + அமைப்பு கருவிகள் (`Task Manager`, `nvidia-smi`) |
| `foundry model benchmark` | `samples/session03/benchmark_oss_models.py` |
| `foundry model list --available` | `foundry model list` |

### வெளியேறும் குறியீடுகள்
| குறியீடு | பொருள் |
|---------|--------|
| 0 | எந்த விதிமீறல்களும் கண்டறியப்படவில்லை |
| 1 | ஒரு அல்லது அதற்கு மேற்பட்ட பழைய முறைகள் கண்டறியப்பட்டன |

### உள்ளூர் இயக்கம்
களஞ்சியத்தின் அடிப்படையில் (பரிந்துரைக்கப்படுகிறது):

Windows (PowerShell):
```powershell
python Workshop\scripts\lint_markdown_cli.py --verbose
```

macOS / Linux:
```bash
python Workshop/scripts/lint_markdown_cli.py --verbose
```

### முன்-Commit ஹூக் (விருப்பம்)
```bash
echo "python Workshop/scripts/lint_markdown_cli.py" > .git/hooks/pre-commit
chmod +x .git/hooks/pre-commit
```
இது பழைய முறைகளை அறிமுகப்படுத்தும் Commit-களைத் தடுக்கிறது.

### CI ஒருங்கிணைப்பு
GitHub Action வேலைநிலை (`.github/workflows/markdown-cli-lint.yml`) `main` மற்றும் `Reactor` கிளைகளில் ஒவ்வொரு push மற்றும் pull request-க்கும் சரிபார்ப்பானை இயக்குகிறது. தோல்வியடைந்த வேலைகளை இணைக்கும் முன் சரிசெய்ய வேண்டும்.

### புதிய பழைய முறைகளைச் சேர்த்தல்
1. `lint_markdown_cli.py`-ஐ திறக்கவும்.
2. `DEPRECATED` பட்டியலில் ஒரு tuple `(regex, suggestion)` ஐ சேர்க்கவும். ஒரு raw string ஐ பயன்படுத்தவும் மற்றும் தேவையான இடங்களில் `\b` வார்த்தை எல்லைகளைச் சேர்க்கவும்.
3. கண்டறிதலை சரிபார்க்க உள்ளூர் சரிபார்ப்பானை இயக்கவும்.
4. Commit செய்து push செய்யவும்; CI புதிய விதியை அமல்படுத்தும்.

உதாரண சேர்க்கை:
```python
DEPRECATED.append((r"\\bfoundry\\s+experimental\\s+foo\\b", "Remove experimental foo usage"))
```

### விளக்கமான குறிப்புகளை அனுமதித்தல்
கோட்புலங்களுக்குள் மட்டுமே கட்டுப்பாடுகள் உள்ளதால், நீங்கள் பழைய கட்டளைகளை உரை வடிவத்தில் பாதுகாப்பாக விவரிக்கலாம். நீங்கள் அவற்றை ஒரு fence-இல் காட்ட *வேண்டும்* என்றால், மூன்று பின்னல்களை **இல்லாமல்** ஒரு fence-ஐ சேர்க்கவும் (எ.கா., இடைவெளி அல்லது மேற்கோள்) அல்லது பாசாங்கு வடிவத்திற்கு மறுபிரதி எழுதவும்.

### குறிப்பிட்ட கோப்புகளை தவிர்க்க (மேம்பட்டது)
தேவைப்பட்டால், பழைய உதாரணங்களை களஞ்சியத்தின் வெளியே ஒரு தனி கோப்பில் அல்லது மசுகு செய்யும் போது வேறு ஒரு நீட்டிப்புடன் மறுபெயரிடவும். மொழிபெயர்க்கப்பட்ட பிரதிகளுக்கான நோக்கமான தவிர்ப்புகள் தானாகவே (translations உள்ள பாதைகளில்) செயல்படுத்தப்படும்.

### சிக்கல்களைத் தீர்க்க
| சிக்கல் | காரணம் | தீர்வு |
|--------|--------|-------|
| சரிபார்ப்பான் நீங்கள் புதுப்பித்த வரியை குறிக்கிறது | Regex மிகவும் பரந்தது | கூடுதல் வார்த்தை எல்லை (`\b`) அல்லது anchors கொண்டு முறைமையை குறைக்கவும் |
| CI தோல்வியடைந்தது ஆனால் உள்ளூர் சரிபார்ப்பானை கடந்து விட்டது | வேறுபட்ட Python பதிப்பு அல்லது Commit செய்யப்படாத மாற்றங்கள் | உள்ளூரில் மீண்டும் இயக்கவும், சுத்தமான வேலை மரத்தை உறுதிப்படுத்தவும், வேலைநிலை Python பதிப்பைச் சரிபார்க்கவும் (3.11) |
| தற்காலிகமாக தவிர்க்க வேண்டும் | அவசர hotfix | உடனடியாக சரிசெய்யவும்; தற்காலிக கிளை மற்றும் தொடர்ச்சியான PR ஐப் பயன்படுத்தவும் (தவிர்க்கும் சுவிட்சுகளைச் சேர்ப்பதை தவிர்க்கவும்) |

### காரணம்
*தற்போதைய* நிலையான CLI மேற்பரப்புடன் ஆவணங்களை இணைத்தல், வேலைகள் சிக்கல்களைத் தவிர்க்க, கற்றல் குழப்பத்தைத் தவிர்க்க, மற்றும் Python ஸ்கிரிப்ட்கள் மூலம் செயல்திறன் அளவீட்டை மையமாக்க உதவுகிறது.

---
வேலைகள் தரம் கருவி சங்கிலியின் ஒரு பகுதியாக பராமரிக்கப்படுகிறது. மேம்பாடுகளுக்கு (எ.கா., தானாக சரிசெய்யும் பரிந்துரைகள் அல்லது HTML அறிக்கை உருவாக்கம்), ஒரு issue ஐ திறக்கவும் அல்லது PR ஐ சமர்ப்பிக்கவும்.

## 2. மாதிரி சரிபார்ப்பு ஸ்கிரிப்ட்

`validate_samples.py` அனைத்து Python மாதிரி கோப்புகளையும் இலக்கண, இறக்குமதி மற்றும் சிறந்த நடைமுறைகள் இணக்கத்திற்காக சரிபார்க்கிறது.

### பயன்பாடு
```bash
# Validate all samples
python scripts/validate_samples.py

# Validate specific session
python scripts/validate_samples.py --session 01

# Verbose mode (includes best practice warnings)
python scripts/validate_samples.py --verbose

# Summary only
python scripts/validate_samples.py --summary
```

### இது என்ன சரிபார்க்கிறது
- ✅ Python இலக்கண சரிபார்ப்பு
- ✅ தேவையான இறக்குமதிகள் உள்ளன
- ✅ பிழை கையாளல் செயல்பாடு (விரிவான முறை)
- ✅ வகை குறிப்புகள் பயன்பாடு (விரிவான முறை)
- ✅ செயல்பாட்டு docstrings (விரிவான முறை)
- ✅ SDK குறிப்பு இணைப்புகள் (விரிவான முறை)

### சூழல் மாறிகள்
- `SKIP_IMPORT_CHECK=1` - இறக்குமதி சரிபார்ப்பை தவிர்க்க
- `SKIP_SYNTAX_CHECK=1` - இலக்கண சரிபார்ப்பை தவிர்க்க

### வெளியேறும் குறியீடுகள்
- `0` - அனைத்து மாதிரிகளும் சரிபார்ப்பை கடந்து விட்டன
- `1` - ஒரு அல்லது அதற்கு மேற்பட்ட மாதிரிகள் தோல்வியடைந்தன

## 3. மாதிரி சோதனை இயக்கி

`test_samples.py` அனைத்து மாதிரிகளிலும் புகை சோதனைகளை இயக்கி அவை பிழையின்றி செயல்படுகிறதா என்பதை உறுதிப்படுத்துகிறது.

### பயன்பாடு
```bash
# Test all samples
python scripts/test_samples.py

# Test specific session
python scripts/test_samples.py --session 01

# Quick mode (shorter timeouts)
python scripts/test_samples.py --quick

# Verbose mode (show output)
python scripts/test_samples.py --verbose
```

### முன்னோட்டங்கள்
- Foundry Local சேவை இயக்கம்: `foundry service start`
- மாடல்கள் ஏற்றப்பட்டன: `foundry model run phi-4-mini`
- தேவையானவை நிறுவப்பட்டன: `pip install -r requirements.txt`

### இது என்ன சோதிக்கிறது
- ✅ மாதிரி runtime பிழைகள் இல்லாமல் செயல்படுகிறது
- ✅ தேவையான வெளியீடு உருவாக்கப்படுகிறது
- ✅ தோல்வியில் சரியான பிழை கையாளல்
- ✅ செயல்திறன் (இயக்க நேரம்)

### சூழல் மாறிகள்
- `FOUNDRY_LOCAL_ALIAS=phi-4-mini` - சோதனைக்கு பயன்படுத்தப்படும் மாடல்
- `TEST_TIMEOUT=30` - மாதிரி ஒன்றுக்கு நேரம் வரம்பு (வினாடிகளில்)

### எதிர்பார்க்கப்படும் தோல்விகள்
சில சோதனைகள் விருப்பமான தேவைகள் நிறுவப்படவில்லை என்றால் தோல்வியடையலாம் (எ.கா., `ragas`, `sentence-transformers`). நிறுவ:
```bash
pip install sentence-transformers ragas datasets
```

### வெளியேறும் குறியீடுகள்
- `0` - அனைத்து சோதனைகளும் வெற்றி பெற்றன
- `1` - ஒரு அல்லது அதற்கு மேற்பட்ட சோதனைகள் தோல்வியடைந்தன

## 4. அளவீட்டு Markdown ஏற்றுமதி

ஸ்கிரிப்ட்: `export_benchmark_markdown.py`

மாடல்களின் தொகுப்புக்கான மீண்டும் உருவாக்கக்கூடிய செயல்திறன் அட்டவணையை உருவாக்குகிறது.

### பயன்பாடு
```powershell
python Workshop\scripts\export_benchmark_markdown.py --models "qwen2.5-0.5b" --prompt "Explain retrieval augmented generation briefly." --rounds 3 --output benchmark_report.md
```

### வெளியீடுகள்
| கோப்பு | விளக்கம் |
|-------|----------|
| `benchmark_report.md` | Markdown அட்டவணை (சராசரி, p95, tokens/sec, விருப்பமான முதல் token) |
| `benchmark_report.json` | மாறாத அளவீட்டு வரிசை வரலாறு மற்றும் வேறுபாட்டிற்காக |

### விருப்பங்கள்
| கொடி | விளக்கம் | இயல்புநிலை |
|------|----------|-----------|
| `--models` | கமா-பிரிக்கப்பட்ட மாடல் பெயர்கள் | (தேவை) |
| `--prompt` | ஒவ்வொரு சுற்றிலும் பயன்படுத்தப்படும் உந்துதல் | (தேவை) |
| `--rounds` | மாடல் ஒன்றுக்கு சுற்றுகள் | 3 |
| `--output` | Markdown வெளியீட்டு கோப்பு | `benchmark_report.md` |
| `--json` | JSON வெளியீட்டு கோப்பு | `benchmark_report.json` |
| `--fail-on-empty` | அனைத்து அளவீடுகளும் தோல்வியடைந்தால் non-zero exit | off |

சூழல் மாறி `BENCH_STREAM=1` முதல் token தாமத அளவீட்டு அளவீட்டைச் சேர்க்கிறது.

### குறிப்புகள்
- மாறாத மாடல் bootstrap மற்றும் caching க்கான ஒரே மாதிரியான `workshop_utils` ஐ மீண்டும் பயன்படுத்துகிறது.
- வேறு வேலை அடைவிலிருந்து இயக்கப்பட்டால், `workshop_utils` ஐ கண்டறிய பாதை மாற்றங்களை முயற்சிக்கிறது.
- GPU ஒப்பீடு: ஒருமுறை இயக்கவும், CLI அமைதியின் மூலம் வேகத்தை இயக்கவும், JSON ஐ மீண்டும் இயக்கி வேறுபாடு காணவும்.

---

**குறிப்பு**:  
இந்த ஆவணம் AI மொழிபெயர்ப்பு சேவை [Co-op Translator](https://github.com/Azure/co-op-translator) பயன்படுத்தி மொழிபெயர்க்கப்பட்டுள்ளது. நாங்கள் துல்லியத்திற்காக முயற்சிக்கிறோம், ஆனால் தானியங்கி மொழிபெயர்ப்புகளில் பிழைகள் அல்லது தவறுகள் இருக்கக்கூடும் என்பதை கவனத்தில் கொள்ளவும். அதன் தாய்மொழியில் உள்ள மூல ஆவணம் அதிகாரப்பூர்வ ஆதாரமாக கருதப்பட வேண்டும். முக்கியமான தகவல்களுக்கு, தொழில்முறை மனித மொழிபெயர்ப்பு பரிந்துரைக்கப்படுகிறது. இந்த மொழிபெயர்ப்பைப் பயன்படுத்துவதால் ஏற்படும் எந்த தவறான புரிதல்கள் அல்லது தவறான விளக்கங்களுக்கு நாங்கள் பொறுப்பல்ல.