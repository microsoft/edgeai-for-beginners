# 第二幕：組建你的播客製作團隊 🎬

![lab2](../../../../../translated_images/zh-TW/lab2.48444b9d549e7863.webp)

## 情節加劇

Alex(你在第一幕中的 AI 助手)很棒,但一個智能體無法運營整個播客工作室。你需要一個*團隊*:
- 🔍 **研究智能體**:搜尋網路尋找新鮮資訊
- ✍️ **腳本智能體**:將研究轉化為引人入勝的對話
- 👤 **你(編輯)**:批准腳本或發回重寫

歡迎來到 **AI 智能體編排** —— 你成為自己 AI 團隊的導演。想想復仇者聯盟,但用於播客製作。

## 什麼是智能體編排?(簡單版本)

想像你在經營一家餐廳。你不會自己做所有事情,對吧?你有:
- 🍳 廚師負責烹飪
- 👨‍🍳 副廚負責準備
- 👩‍🍳 服務員負責送餐

智能體編排是同樣的想法,但用 AI。每個智能體都有專長,你協調它們實現更大的目標。沒有單個智能體不堪重負,工作完成得更快。

### 樂隊類比 🎸

你的 AI 代理就像一個樂隊：
- **主唱**：處理面向客戶任務的主要代理
- **鼓手**：保持節奏，處理後台處理
- **貝斯手**：支持每個人，獲取資料
- **你（樂隊經理）**：協調所有！

沒有協調？只是噪音。有編排？美妙的音樂。

### 為什麼這很重要

一個 AI 智能體試圖做所有事情 = 倦怠。專業智能體一起工作 = 效率解鎖!🚀

**實話實說**:還記得嘗試獨自研究、編寫和編輯你的播客嗎?是的,那很糟糕。透過編排,每個智能體處理它最擅長的。你只需做最終決定。

**現實世界的例子**：客戶支援機器人知道何時處理帳單 vs 技術問題 vs 何時呼叫人類。那就是編排！

## 智能體 vs 工作流:有什麼區別?

這樣想:

### 🤖 AI 智能體 = 爵士樂手
- **即興決策**基於它聽到的內容
- **即興創作**使用它的工具解決方案
- **思考**用 LLM 大腦
- **適應**你丟給它的任何東西

### 🎵 工作流 = 管弦樂隊演奏古典音樂
- **遵循樂譜**（預定義步驟）
- **可預測的**執行路徑
- **協調**多個智能體、人類、系統
- **結構化**像食譜一樣

**魔力**:工作流*編排*智能體!你構建一個工作流,告訴智能體何時發揮它們的作用。兩全其美。🎭

## 三種協調你的 AI 團隊的方式

### 1. 🎯 集中式（你是老闆）

一個主智能體發號施令。把它想象成你管理一個團隊 —— 你決定誰做什麼以及何時做。

**優點**：
- ✅ 清晰的領導（沒有混亂）
- ✅ 一致的決策
- ✅ 易於調試

**適用於**：
- 客戶服務路由（"這是帳單還是技術支援？"）
- 內容審批工作流（"這個腳本通過了嗎？"）
- 播客製作（正是我們正在構建的！）

### 2. 🤝 去中心化(智能體自組織)

智能體直接相互交談並作為一個群體解決問題。就像每個人都在協調的群聊。

**優點**:
- ✅ 易於擴展(隨時添加更多智能體)
- ✅ 沒有單點故障
- ✅ 智能體自然協作

**適用於**:
- 研究團隊(每個智能體探索不同來源)
- 腦力激盪會議
- 分散式問題解決

### 3. 🔀 混合式（兩全其美）

你設定整體方向,但智能體在任務上有自由自組織。就像一個信任團隊的 CEO。

**完美適用於**：需要控制和靈活性的複雜專案。

## Microsoft Agent Framework：你的編排工具包 🧰

是時候構建了！這是你將使用的：

### 構建模塊

#### 1. 🧱 執行器（你的工人）
- **它們是什麼**：單獨的處理單元 —— 可能是智能體或自訂邏輯
- **它們做什麼**：接收輸入，完成工作，產生輸出
- **把它們想象成**：流水線上的工作站

#### 2. ➡️ 邊（連接）
- **它們是什麼**：執行器之間的路徑
- **它們做什麼**：控制訊息流（"在 A 之後，去 B"）
- **把它們想象成**：流程圖上的箭頭

#### 3. 🗺️ 工作流（整體計劃）
- **它們是什麼**：執行器 + 邊的完整圖
- **它們做什麼**：定義從開始到結束的整個過程
- **把它們想象成**：你的製作流程藍圖

### 你會喜歡的酷功能

**🛡️ 類型安全**:智能體之間的訊息是類型檢查的。沒有"哎呀,錯誤的資料類型"驚喜。

**🔀 靈活路由**：
- If-then 條件（"如果批准，發布；否則，重寫"）
- 並行處理（多個代理同時工作）
- 動態路徑（工作流根據結果調整）

**🔌 外部整合**：
- 連接到 API
- 添加人工在環檢查點（你在發布前批准）
- 構建請求/回應流

**💾 檢查點**：保存進度！如果某些東西崩潰了，從你離開的地方繼續。

**🤝 多代理協調**：
- 按順序執行代理（A → B → C）
- 並行執行它們（A + B + C 同時）
- 代理之間交接
- 協作處理

## 最佳實踐（專業提示）🎯

### 1. 保持模組化
每個智能體應該真正做好一件事。不要製作一個做所有事情的"超級智能體" —— 你在調試時會後悔的。

### 2. 為失敗做計劃
智能體會搞砸。網路會失敗。構建錯誤處理和備用計劃。你未來的自己會感謝你。

### 3. 監控一切
追蹤你的智能體在做什麼。使用 DevUI(我們會介紹的!)查看執行中的工作流。

### 4. 優化訊息大小
不要在智能體之間傳遞巨大的檔案。保持訊息精簡以提升速度。

### 5. 選擇正確的模式
需要控制？選擇集中式。需要規模？選擇去中心化。無法決定？選擇混合式！

## DevUI：你的工作流除錯器 🔍

### 什麼是 DevUI？

DevUI 就像測試你的智能體和工作流的遊樂場。這是一個 Web 介面,你可以:
- 👀 觀看你的工作流運行
- 💬 直接與智能體聊天
- 🔍 當事情出錯時除錯
- 📊 查看追蹤和效能指標

> **重要**：DevUI 僅用於開發！不要在生產中使用它。把它想象成你的本地測試環境。

### 什麼讓它很棒

- **🖥️ 互動式 Web UI**：點擊、輸入、測試 —— 不需要命令列
- **📁 拖放就緒**：上傳檔案，用不同輸入測試
- **📂 自動發現**:指向一個資料夾,它會自動找到所有智能體
- **📋 無需設定模式**:在代碼中註冊智能體,無需資料夾結構
- **🔌 OpenAI 相容**:與 OpenAI SDK 相容(相容性萬歲!)
- **👁️ 內建追蹤**:準確看到你的智能體在做什麼

### 輸入如何工作

DevUI 對輸入很聰明：

- **測試智能體?** 你得到文字框和檔案上傳按鈕
- **測試工作流？** UI 根據你的工作流期望的內容自動產生輸入欄位

這就像魔法，但這只是好代碼。✨

## 你的任務：構建播客工作室 🎬

### 任務 1：使用 DevUI 創建單個代理

📂 [01.AgentDevUI](../../../../../WorkshopForAgentic/code/02.Workflow/01.AgentDevUI)

**挑戰**：在構建完整團隊之前，讓我們用一個代理測試 DevUI：網路搜尋專家。

**你正在構建什麼**：
一個可以搜尋網際網路尋找播客主題的研究代理。你將使用 DevUI 的 Web 介面 `http://localhost:8090` 進行測試。

**你將學到的技能**：
- 🚀 在 DevUI 中啟動代理
- 🔍 實時測試代理回應
- 🛠️ 建構自訂工具（網路搜尋）
- 📊 啟用追蹤以除錯問題
- 🖥️ 使用互動式 Web UI

**代碼**：
- `agent.py`：你的具有網路搜尋超能力的 SearchAgent
- 使用 OllamaChatClient 連接到 Qwen
- 實作 `web_search()` 工具函數
- 使用 `serve()` 啟動 —— 自動開啟 DevUI

**勝利條件**：問你的代理"AI 領域有什麼熱點？"看它搜尋網路！🎉

### 任務 2:構建多智能體工作流

📂 [02.WorkflowDevUI](../../../../../WorkshopForAgentic/code/02.Workflow/02.WorkflowDevUI)

**挑戰**:現在真正的樂趣開始了!構建一個完整的播客製作工作流:
1. 🔍 **搜尋智能體** → 研究你的主題
2. ✍️ **腳本智能體** → 編寫兩個主持人之間的對話(用中文!)
3. 👤 **審查執行器** → 要求你批准或拒絕
4. 🔄 **迴圈回退** → 如果被拒絕,根據你的反饋重寫

**你將學到的技能**:
- 🧱 為不同工作建立專門的智能體
- 🔗 使用 WorkflowBuilder 連接智能體
- 🔀 實作批准迴圈（人工在環！）
- 🚦 條件路由（如果批准 vs 拒絕）
- 🔧 為業務邏輯建構自訂執行器

**工作流**：
```
SearchAgent → ScriptAgent → ReviewExecutor
                             ↑          ↓ (如果被拒绝)
                             ←─────────
```

**代碼**：
- `search_agent/agent.py`：你的研究專家
- `generate_script_agent/agent.py`：你的腳本作者（用中文寫！）
- `workflow/workflow.py`：編排魔法在這裡發生
- `main.py`：在 DevUI 中啟動一切

**勝利條件**：給一個主題，審查腳本，拒絕一次以測試迴圈，然後批准！🎉

### 任務 3：構建控制台應用

📂 [03.Application](../../../../../WorkshopForAgentic/code/02.Workflow/03.Application)

**挑戰**：將你的工作流從 DevUI 轉變為帶有彩色輸出、加載旋轉器和檔案保存的時髦終端應用。這是生產就緒的東西！

**你將學到的技能**：
- ⚡ 以程式方式運行工作流（無 DevUI）
- 📡 使用串流的事件驅動架構
- 🎨 創建漂亮的終端 UI（顏色、旋轉器、進度條）
- 💾 將最終腳本保存到檔案
- 🔄 使用 Python 的 asyncio 處理非同步工作流

**它做什麼**：
1. 詢問你播客主題
2. 顯示實時進度（"搜尋智能體正在工作..."）
3. 用顏色顯示生成的腳本
4. 請求你的批准
5. 將批准的腳本保存到 `podcast.txt`

**代碼**：
- `podcast_app.py`：你的帶有事件處理的主應用
- `workflow.py`：重用任務 2 的工作流
- 處理事件：`AgentRunUpdateEvent`、`RequestInfoEvent`、`WorkflowOutputEvent`
- 使用 ANSI 顏色進行終端樣式

**勝利條件**：運行應用，創建播客腳本，看到它被保存！你已經構建了一個真正的工具。🚀

## 你已經掌握的 🏆

第二幕之後，你可以：

- ✅ 像老闆一樣編排多個 AI 智能體
- ✅ 構建具有順序和條件邏輯的工作流
- ✅ 添加人工批准檢查點
- ✅ 使用 DevUI 測試和調試工作流
- ✅ 創建生產就緒的控制台應用程式
- ✅ 在複雜系統中優雅地處理錯誤
- ✅ 為任何項目選擇正確的編排模式

## 當事情出錯時 🔧

### "我的工作流太複雜了！"
**解決方案**：將其分解為更小的子工作流。每個工作流應該做好一件事。如果需要，將它們鏈接在一起。

### "我無法追蹤正在發生的事情！"
**解決方案**：使用工作流檢查點保存狀態。在 DevUI 中啟用追蹤以查看每一步。

### "一個智能體的錯誤會崩潰所有東西!"
**解決方案**: 添加錯誤邊界。每個智能體應該處理自己的失敗並有備用行為。

### "這太慢了"
**解決方案**: 有智能體可以並行運行嗎?順序工作流很容易但很慢。尋找並行化機會!

## 有用的資源 🔗

- [工作流文件](https://learn.microsoft.com/en-us/agent-framework/user-guide/workflows/overview) —— 官方 Microsoft 指南
- [編排模式](https://www.ibm.com/think/topics/ai-agent-orchestration) —— IBM 的看法
- [Agent Framework GitHub](https://github.com/microsoft/agent-framework) —— 瀏覽原始碼
- [程式碼示例](https://github.com/microsoft/agent-framework/tree/main/python/samples) —— 從這裡竊取模式

---

**準備好迎接大結局了嗎？** 你有了腳本。現在讓我們把它變成真實的音訊！→ [第三幕：讓你的播客活起來](03.Multi-SpeakerPodcastGenerationWithVibeVoice.md) 🎤

---

**卡住了？困惑了？興奮了？** 在工作坊聊天中分享！我們一起學習。🚀

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
**免責聲明**：  
本文件使用 AI 翻譯服務 [Co-op Translator](https://github.com/Azure/co-op-translator) 進行翻譯。雖然我們力求準確，但請注意自動翻譯可能包含錯誤或不準確之處。原始文件之母語版本應視為權威來源。對於重要資訊，建議採用專業人工翻譯。對於因使用本翻譯而產生的任何誤解或誤譯，我們不承擔任何責任。
<!-- CO-OP TRANSLATOR DISCLAIMER END -->