<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "2a2578dc4f813ca93ca7952d842a4b59",
  "translation_date": "2026-01-05T14:32:36+00:00",
  "source_file": "WorkshopForAgentic/translation/zh-cn/02.AIAgentOrchestrationAndWorkflows.md",
  "language_code": "ja"
}
-->
# 第二幕：あなたのポッドキャスト制作チームを結成する 🎬

![lab2](../../../../../translated_images/lab2.48444b9d549e7863.ja.png)

## ストーリーの盛り上がり

Alex（第一幕のあなたのAIアシスタント）は素晴らしいですが、一つのエージェントだけでポッドキャストスタジオ全体を運営することはできません。あなたには*チーム*が必要です：
- 🔍 **リサーチエージェント**：新鮮な情報を探してウェブを検索
- ✍️ **スクリプトエージェント**：リサーチを魅力的な対話に変換
- 👤 **あなた（編集者）**：スクリプトを承認するか、書き直しを返す

ようこそ **AIエージェントオーケストレーション** へ——あなたは自分のAIチームのディレクターになります。アベンジャーズのようなものですが、ポッドキャスト制作用です。

## エージェントオーケストレーションとは？（簡単版）

あなたがレストランを経営していると想像してみてください。すべてを自分でやるわけではないですよね？あなたには：
- 🍳 料理人が料理を担当
- 👨‍🍳 副料理人が準備を担当
- 👩‍🍳 ウェイターが配膳を担当

エージェントオーケストレーションも同じ考え方で、AIを使います。各エージェントは専門分野を持ち、あなたがそれらを調整して大きな目標を達成します。単一のエージェントが過負荷になることはなく、作業はより速く進みます。

### バンドのたとえ 🎸

あなたのAIエージェントはバンドのようなものです：
- **ボーカル**：顧客対応の主要なエージェント
- **ドラマー**：リズムを維持し、バックグラウンド処理を担当
- **ベース**：みんなをサポートしデータを取得
- **あなた（バンドマネージャー）**：すべてを調整！

調整がなければ？ただの雑音。オーケストレーションがあれば？素敵な音楽になります。

### なぜこれが重要なのか

1つのAIエージェントがすべてをやろうとする＝燃え尽き症候群。専門のエージェントが協力すれば＝効率アップ！🚀

**正直に言うと**：一人でリサーチ、執筆、編集をやろうとしたのを覚えていますか？そう、それはひどかったです。オーケストレーションにより、各エージェントが得意なことを処理し、あなたは最終決定だけを行います。

**現実の例**：カスタマーサポートボットが請求か技術かを判断し、いつ人間を呼ぶべきか知っている―それがオーケストレーションです！

## エージェント vs ワークフロー：違いは何？

こう考えてください：

### 🤖 AIエージェント ＝ ジャズミュージシャン
- **即興的に意思決定**：聞いたことに基づく
- **即興で創作**：持っているツールを使う
- **考える**：LLMの頭脳で
- **適応**：投げられたものすべてに対応

### 🎵 ワークフロー ＝ クラシック音楽のオーケストラ演奏
- **楽譜に従う**（事前定義されたステップ）
- **予測可能な**実行パス
- **複数のエージェント、人間、システムを調整**
- **構造化されている**：レシピのように

**魔法**：ワークフローはエージェントを*オーケストレーション*します！あなたはワークフローを構築し、エージェントにいつ役割を果たすかを指示します。最高の両立。🎭

## AIチームを調整する3つの方法

### 1. 🎯 集中型（あなたがボス）

1つの主要エージェントが指示を出します。これはあなたがチームを管理しているようなもので、誰が何をいつするかを決めます。

**利点**：
- ✅ 明確なリーダーシップ（混乱なし）
- ✅ 一貫した意思決定
- ✅ デバッグが簡単

**向いている場合**：
- カスタマーサービスのルーティング（「請求か技術サポートか？」）
- コンテンツ承認ワークフロー（「このスクリプトは合格か？」）
- ポッドキャスト制作（まさに今、私たちが作っているもの！）

### 2. 🤝 分散型（エージェントが自律的に組織）

エージェント同士が直接対話し、集団として問題を解決します。全員が調整されたグループチャットのよう。

**利点**:
- ✅ スケールしやすい（いつでもエージェント追加可能）
- ✅ 単一の故障点なし
- ✅ 自然なエージェント協力

**向いている場合**:
- リサーチチーム（各エージェントが異なる情報源を探索）
- ブレインストーミングセッション
- 分散問題解決

### 3. 🔀 ハイブリッド（ベストオブ両方）

あなたが大まかな方向性を決め、エージェントがタスクの中で自由に自律的に動きます。信頼するチームのCEOのようなもの。

**完璧な用途**：制御と柔軟性が必要な複雑なプロジェクト。

## Microsoft Agent Framework：あなたのオーケストレーションツールセット 🧰

構築の時間です！これがあなたの使うものです：

### ビルディングブロック

#### 1. 🧱 実行者（あなたの労働者）
- **何か**：個別の処理単位——エージェントやカスタムロジックかもしれません
- **何をするか**：入力を受け取り仕事を完遂し、出力を生み出す
- **例えるなら**：製造ラインの作業ステーション

#### 2. ➡️ エッジ（つなぎ目）
- **何か**：実行者間のパス
- **何をするか**：メッセージの流れを制御（「Aの後にBへ」）
- **例えるなら**：フローチャートの矢印

#### 3. 🗺️ ワークフロー（全体計画）
- **何か**：実行者＋エッジの完全な図
- **何をするか**：開始から終了までの全プロセスを定義
- **例えるなら**：制作プロセスの設計図

### あなたが好きになるクールな機能

**🛡️ 型安全**：エージェント間のメッセージは型チェック済み。データ型の誤りで「あれ？」はなし。

**🔀 柔軟なルーティング**：
- If-then 条件（「承認なら公開、そうでなければ書き直し」）
- 並列処理（複数のエージェントが同時に作業）
- 動的経路（結果に応じてワークフローが調整）

**🔌 外部統合**：
- APIへの接続
- 人間が関与するチェックポイント追加（リリース前にあなたが承認）
- リクエスト／レスポンスフロー構築

**💾 チェックポイント**：進捗保存！何かがクラッシュしても途中から再開可能。

**🤝 複数エージェントの調整**：
- 順番にエージェント実行（A → B → C）
- 並列実行（A + B + C 一緒に）
- エージェント間の引き継ぎ
- 協同処理

## ベストプラクティス（プロのコツ）🎯

### 1. モジュール化を保つ
各エージェントは本当に一つのことを上手にやるべき。「何でも屋のスーパーエージェント」は作らないで──デバッグ時に後悔します。

### 2. 失敗に備える
エージェントは間違います。ネットも切れます。エラーハンドリングとバックアッププランを組み込んで。未来のあなたが感謝します。

### 3. すべてを監視
エージェントが何をしているかを追跡。DevUI（後で紹介します！）を使って、走っているワークフローを見ましょう。

### 4. メッセージサイズを最適化
エージェント間で巨大ファイルを渡さないこと。メッセージはシンプルに保ち、スピードアップ。

### 5. 適切なパターンを選択
制御が必要？集中型を選ぶ。スケールしたい？分散型を選ぶ。決められない？ハイブリッドを選ぶ！

## DevUI：あなたのワークフローデバッガー 🔍

### DevUIとは？

DevUIはあなたのエージェントとワークフローをテストする遊び場のようなもの。Webインターフェースで：
- 👀 ワークフローの実行を観察
- 💬 エージェントと直接チャット
- 🔍 エラー時にデバッグ
- 📊 トレースとパフォーマンスメトリクスを表示

> **重要**：DevUIは開発専用！本番環境では使用しないでください。ローカルのテスト環境のように考えて。

### 素晴らしい理由

- **🖥️ インタラクティブなWeb UI**：クリック、入力、テスト──コマンドライン不要
- **📁 ドラッグ＆ドロップ対応**：ファイルアップロード、多様な入力テスト
- **📂 自動発見**：フォルダーを指定すれば、すべてのエージェントを自動で見つける
- **📋 設定不要**：コード内のエージェント登録だけでフォルダー構造不要
- **🔌 OpenAI互換**：OpenAI SDKとの互換性（互換性ばんざい！）
- **👁️ 内蔵トレース**：エージェントの動きを正確に確認

### 入力はどう機能する？

DevUIは入力に賢く対応：

- **エージェントをテスト？**：テキストボックスとファイルアップロードボタンが出現
- **ワークフローをテスト？**：期待される内容に基づいた入力フィールドが自動生成される

まるで魔法ですが、実際は良いコードです。✨

## あなたのミッション：ポッドキャストスタジオを構築 🎬

### ミッション 1：DevUIで単一エージェントを作る

📂 [01.AgentDevUI](../../../../../WorkshopForAgentic/code/02.Workflow/01.AgentDevUI)

**チャレンジ**：完全なチームを構築する前に、単一のエージェントでDevUIをテストしましょう：ウェブ検索の専門家です。

**何を作るか**：
ポッドキャストのトピックを探すためにインターネットを検索できるリサーチエージェント。DevUIのWeb UI `http://localhost:8090` でテストします。

**学べるスキル**：
- 🚀 DevUIでエージェント起動
- 🔍 リアルタイムでエージェントの応答をテスト
- 🛠️ カスタムツール（ウェブ検索）構築
- 📊 トレースを有効にして問題をデバッグ
- 🖥️ インタラクティブWeb UIを使用

**コード**：
- `agent.py`：ウェブ検索能力を持つSearchAgent
- OllamaChatClientを使用してQwenに接続
- `web_search()`ツール関数実装
- `serve()`で起動——DevUIを自動オープン

**成功条件**：エージェントに「AI分野のホットトピックは何？」と聞いてネット検索させる！🎉

### ミッション 2：マルチエージェントワークフローを作る

📂 [02.WorkflowDevUI](../../../../../WorkshopForAgentic/code/02.Workflow/02.WorkflowDevUI)

**チャレンジ**：さあ、本当の楽しみが始まります！完全なポッドキャスト制作ワークフローを構築しましょう：
1. 🔍 **リサーチエージェント** → トピックを調べる
2. ✍️ **スクリプトエージェント** → 2人のホスト間の対話を作成（中国語で！）
3. 👤 **レビュー実行者** → あなたの承認または拒否を求める
4. 🔄 **ループフィードバック** → 拒否されたらあなたのフィードバックに基づいて書き直し

**学べるスキル**：
- 🧱 各作業に特化したエージェント作成
- 🔗 WorkflowBuilderでエージェントを接続
- 🔀 承認ループ実装（人間の介入！）
- 🚦 条件付きルーティング（承認 vs 拒否）
- 🔧 業務ロジック用カスタム実行者作成

**ワークフロー**：
```
SearchAgent → ScriptAgent → ReviewExecutor
                             ↑          ↓ (如果被拒绝)
                             ←─────────
```

**コード**：
- `search_agent/agent.py`：リサーチ専門家
- `generate_script_agent/agent.py`：スクリプト作成者（中国語で執筆！）
- `workflow/workflow.py`：オーケストレーションの魔法がここに
- `main.py`：DevUIで全て起動

**成功条件**：トピックを与え、スクリプトをレビューし、一度拒否してループをテストし、その後承認！🎉

### ミッション 3：コンソールアプリを作る

📂 [03.Application](../../../../../WorkshopForAgentic/code/02.Workflow/03.Application)

**チャレンジ**：DevUIのワークフローをカラフルな出力、読み込みスピナー、ファイル保存機能付きのおしゃれな端末アプリに変換。これは本番対応です！

**学べるスキル**：
- ⚡ プログラム的にワークフローを実行（DevUI不要）
- 📡 イベント駆動のストリーミングアーキテクチャ使用
- 🎨 美しい端末UI作成（色、スピナー、進捗バー）
- 💾 完成スクリプトをファイルに保存
- 🔄 Pythonのasyncioで非同期ワークフロー運用

**動作内容**：
1. ポッドキャストのテーマを尋ねる
2. リアルタイム進捗表示（「リサーチエージェントが作業中...」）
3. 生成されたスクリプトを色付きで表示
4. 承認を要求
5. 承認されたスクリプトを`podcast.txt`に保存

**コード**：
- `podcast_app.py`：イベント対応のメインアプリ
- `workflow.py`：ミッション2のワークフロー再利用
- イベントの処理：`AgentRunUpdateEvent`、`RequestInfoEvent`、`WorkflowOutputEvent`
- ANSIカラーを使ったターミナルスタイル

**勝利条件**：アプリを実行し、ポッドキャストスクリプトを作成して、それが保存されるのを見よう！あなたは本当のツールを構築しました。🚀

## あなたが習得したこと 🏆

第二幕の後、あなたは：

- ✅ ボスのように複数のAIエージェントをオーケストレーションできる
- ✅ 順序と条件ロジックを持つワークフローを作成できる
- ✅ 人間の承認チェックポイントを追加できる
- ✅ DevUIを使用してワークフローをテストおよびデバッグできる
- ✅ 本番対応のコンソールアプリを作成できる
- ✅ 複雑なシステムで優雅にエラーを処理できる
- ✅ どんなプロジェクトにも適切なオーケストレーションパターンを選択できる

## 問題が起きたとき 🔧

### 「私のワークフローは複雑すぎる！」
**解決策**：より小さなサブワークフローに分割しましょう。各ワークフローは一つのことをうまくこなすべきです。必要なら、それらをリンクしましょう。

### 「何が起きているのか追えない！」
**解決策**：ワークフローチェックポイントで状態を保存しましょう。DevUIでトレースを有効にして各ステップを見ましょう。

### 「1つのエージェントの失敗が全てをクラッシュさせる！」
**解決策**：エラーバウンダリーを追加しましょう。各エージェントは自分の失敗を処理し、代替行動を持つべきです。

### 「遅すぎる」
**解決策**：エージェントは並列で動かせますか？順序型ワークフローは簡単ですが遅いです。並列化の機会を探しましょう！

## 役立つリソース 🔗

- [ワークフロードキュメント](https://learn.microsoft.com/en-us/agent-framework/user-guide/workflows/overview) —— 公式Microsoftガイド
- [オーケストレーションパターン](https://www.ibm.com/think/topics/ai-agent-orchestration) —— IBMの見解
- [Agent Framework GitHub](https://github.com/microsoft/agent-framework) —— ソースコードを閲覧
- [コードサンプル](https://github.com/microsoft/agent-framework/tree/main/python/samples) —— ここからパターンを盗もう

---

**大詰めの準備はできましたか？** スクリプトはできています。次はそれを本物の音声にしましょう！→ [第三幕：ポッドキャストに命を吹き込む](03.Multi-SpeakerPodcastGenerationWithVibeVoice.md) 🎤

---

**詰まった？混乱した？興奮している？** ワークショップチャットで共有しよう！一緒に学びましょう。🚀

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
**免責事項**：  
本書類はAI翻訳サービス[Co-op Translator](https://github.com/Azure/co-op-translator)を使用して翻訳されています。正確性の確保に努めておりますが、自動翻訳には誤りや不正確な部分が含まれる可能性があることをご承知ください。原文が正本としての権威ある資料とみなされます。重要な情報については、専門の翻訳者による翻訳をお勧めします。本翻訳の利用に伴う誤解や誤訳に関して、当方は一切の責任を負いかねます。
<!-- CO-OP TRANSLATOR DISCLAIMER END -->