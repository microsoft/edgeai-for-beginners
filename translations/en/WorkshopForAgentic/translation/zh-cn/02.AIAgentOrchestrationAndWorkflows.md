<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "2a2578dc4f813ca93ca7952d842a4b59",
  "translation_date": "2026-01-05T14:12:54+00:00",
  "source_file": "WorkshopForAgentic/translation/zh-cn/02.AIAgentOrchestrationAndWorkflows.md",
  "language_code": "en"
}
-->
# Act Two: Build Your Podcast Production Team ğŸ¬

![lab2](../../../../../translated_images/lab2.48444b9d549e7863.en.png)

## Plot Thickens

Alex (your AI assistant from Act One) is great, but one agent can't run an entire podcast studio. You need a *team*:
- ğŸ” **Research Agent**: searches the web for fresh information
- âœï¸ **Script Agent**: turns research into engaging dialogue
- ğŸ‘¤ **You (Editor)**: approve scripts or send them back for rewrite

Welcome to **AI Agent Orchestration** â€” you become the director of your own AI team. Think Avengers, but for podcast production.

## What is Agent Orchestration? (Simple Version)

Imagine you run a restaurant. You donâ€™t do everything yourself, right? You have:
- ğŸ³ Chefs cooking
- ğŸ‘¨â€ğŸ³ Sous-chefs prepping
- ğŸ‘©â€ğŸ³ Waitstaff serving

Agent orchestration is the same idea, but with AI. Each agent has expertise, and you coordinate them to achieve a bigger goal. No single agent gets overwhelmed, and work gets done faster.

### Band Analogy ğŸ¸

Your AI agents are like a band:
- **Lead singer**: main agent handling client-facing tasks
- **Drummer**: keeps the rhythm, handles backend processing
- **Bassist**: supports everyone, fetching data
- **You (band manager)**: coordinate them all!

No coordination? Just noise. Orchestration? Beautiful music.

### Why It Matters

One AI agent trying to do everything = burnout. Specialized agents working together = unlocked efficiency! ğŸš€

**Truth bomb**: Remember trying to research, write, and edit your podcast all alone? Yeah, that sucked. Orchestration means each agent handles what itâ€™s best at. You just make the final call.

**Real-world example**: Customer support bots know when to deal with billing vs technical issues vs calling a human. Thatâ€™s orchestration!

## Agent vs Workflow: Whatâ€™s the Difference?

Think of it this way:

### ğŸ¤– AI Agent = Jazz musician
- **Improvises** based on what it hears
- **Creates on the fly** using its toolkit
- **Thinks** with an LLM brain
- **Adapts** to whatever you throw at it

### ğŸµ Workflow = Orchestra playing classical music
- **Follows sheet music** (predefined steps)
- **Predictable** execution path
- **Coordinates** multiple agents, humans, and systems
- **Structured** like a recipe

**The magic**: workflows *orchestrate* agents! You build a workflow that tells agents when to play their part. Best of both worlds. ğŸ­

## Three Ways to Coordinate Your AI Team

### 1. ğŸ¯ Centralized (You are the boss)

One main agent calls the shots. Think of it as you managing a team â€” you decide who does what and when.

**Pros**:
- âœ… Clear leadership (no confusion)
- âœ… Consistent decisions
- âœ… Easier to debug

**Good for**:
- Customer service routing (â€œIs this billing or tech support?â€)
- Content approval workflows (â€œDid this script pass?â€)
- Podcast production (exactly what weâ€™re building!)

### 2. ğŸ¤ Decentralized (Agents self-organize)

Agents talk directly to each other and solve problems as a group. Like everyone coordinating in a group chat.

**Pros**:
- âœ… Easy to scale (add more agents anytime)
- âœ… No single point of failure
- âœ… Agents naturally collaborate

**Good for**:
- Research teams (each agent explores different sources)
- Brainstorming sessions
- Distributed problem solving

### 3. ğŸ”€ Hybrid (Best of both worlds)

You set overall direction, but agents have freedom to self-organize on tasks. Like a CEO who trusts their team.

**Perfect for**: Complex projects needing both control and flexibility.

## Microsoft Agent Framework: Your Orchestration Toolkit ğŸ§°

Time to build! Hereâ€™s what youâ€™ll use:

### Building Blocks

#### 1. ğŸ§± Executors (your workers)
- **What they are**: individual processing units â€” could be agents or custom logic
- **What they do**: take input, do work, produce output
- **Think of them as**: stations on a production line

#### 2. â¡ï¸ Edges (connections)
- **What they are**: pathways between executors
- **What they do**: control message flow (â€œafter A, go to Bâ€)
- **Think of them as**: arrows on a flowchart

#### 3. ğŸ—ºï¸ Workflow (overall plan)
- **What they are**: complete graph of executors + edges
- **What they do**: define the entire process from start to finish
- **Think of it as**: your production blueprint

### Cool features you'll love

**ğŸ›¡ï¸ Type safety**: messages between agents are type-checked. No â€œoops, wrong data typeâ€ surprises.

**ğŸ”€ Flexible routing**:
- If-then conditions (â€œIf approved, publish; else rewriteâ€)
- Parallel processing (multiple agents working simultaneously)
- Dynamic paths (workflow adapts based on results)

**ğŸ”Œ External integration**:
- Connect to APIs
- Add human-in-the-loop checkpoints (you approve before publishing)
- Build request/response flows

**ğŸ’¾ Checkpoints**: save progress! If something crashes, continue where you left off.

**ğŸ¤ Multi-agent coordination**:
- Run agents sequentially (A â†’ B â†’ C)
- Run them in parallel (A + B + C at once)
- Handoffs between agents
- Collaborative processing

## Best Practices (Pro Tips) ğŸ¯

### 1. Keep it modular
Each agent should really do one thing well. Donâ€™t build a â€œsuper-agentâ€ that does everything â€” youâ€™ll regret it while debugging.

### 2. Plan for failure
Agents mess up. Networks fail. Build error handling and fallback plans. Your future self will thank you.

### 3. Monitor everything
Track what your agents are doing. Use DevUI (weâ€™ll introduce it!) to watch workflows run.

### 4. Optimize message size
Donâ€™t pass huge files between agents. Keep messages lean for speed.

### 5. Pick the right pattern
Need control? Go centralized. Need scale? Go decentralized. Canâ€™t decide? Go hybrid!

## DevUI: Your Workflow Debugger ğŸ”

### What is DevUI?

DevUI is like a playground to test your agents and workflows. Itâ€™s a web interface where you can:
- ğŸ‘€ Watch your workflows run
- ğŸ’¬ Chat directly with agents
- ğŸ” Debug when things go wrong
- ğŸ“Š View traces and performance metrics

> **Important**: DevUI is for development only! Donâ€™t use in production. Think of it as your local test environment.

### What makes it great

- **ğŸ–¥ï¸ Interactive web UI**: click, input, test â€” no command line needed
- **ğŸ“ Drag & drop ready**: upload files, test with different inputs
- **ğŸ“‚ Auto discovery**: point to a folder and it finds all agents
- **ğŸ“‹ No setup mode**: register agents in code, no folder structure needed
- **ğŸ”Œ OpenAI compatible**: works with OpenAI SDK (yay compatibility!)
- **ğŸ‘ï¸ Built-in tracing**: see exactly what your agents are doing

### How input works

DevUI is smart about input:

- **Testing an agent?** You get text boxes and file upload buttons
- **Testing a workflow?** UI auto-generates input fields based on your workflowâ€™s expectations

Itâ€™s like magic, but just good code. âœ¨

## Your Mission: Build a Podcast Studio ğŸ¬

### Task 1: Create a single agent with DevUI

ğŸ“‚ [01.AgentDevUI](../../../../../WorkshopForAgentic/code/02.Workflow/01.AgentDevUI)

**Challenge**: Before building the full team, letâ€™s test DevUI with one agent: a web search expert.

**What youâ€™re building**:
A research agent that can search the internet for podcast topics. Youâ€™ll test with DevUIâ€™s web UI at `http://localhost:8090`.

**Skills youâ€™ll learn**:
- ğŸš€ Launching an agent in DevUI
- ğŸ” Testing agent responses live
- ğŸ› ï¸ Building custom tools (web search)
- ğŸ“Š Enabling tracing to debug issues
- ğŸ–¥ï¸ Using interactive web UI

**Code**:
- `agent.py`: your SearchAgent with web search superpowers
- Uses OllamaChatClient connected to Qwen
- Implements `web_search()` tool function
- Starts with `serve()` â€” auto opens DevUI

**Victory condition**: Ask your agent â€œWhatâ€™s hot in AI?â€ and watch it search the web! ğŸ‰

### Task 2: Build a multi-agent workflow

ğŸ“‚ [02.WorkflowDevUI](../../../../../WorkshopForAgentic/code/02.Workflow/02.WorkflowDevUI)

**Challenge**: Now the real fun begins! Build a full podcast production workflow:
1. ğŸ” **Search agent** â†’ research your topic
2. âœï¸ **Script agent** â†’ write a two-host dialogue (in Chinese!)
3. ğŸ‘¤ **Review executor** â†’ ask you to approve or reject
4. ğŸ”„ **Loopback** â†’ if rejected, rewrite based on feedback

**Skills youâ€™ll learn**:
- ğŸ§± Creating specialized agents for different tasks
- ğŸ”— Connecting agents with WorkflowBuilder
- ğŸ”€ Implementing approval loops (human in the loop!)
- ğŸš¦ Conditional routing (approve vs reject)
- ğŸ”§ Building custom executors for business logic

**Workflow**:
```
SearchAgent â†’ ScriptAgent â†’ ReviewExecutor
                             â†‘          â†“ (å¦‚æœè¢«æ‹’ç»)
                             â†â”€â”€â”€â”€â”€â”€â”€â”€â”€
```

**Code**:
- `search_agent/agent.py`: your research expert
- `generate_script_agent/agent.py`: your script writer (in Chinese!)
- `workflow/workflow.py`: where the orchestration magic happens
- `main.py`: launches everything in DevUI

**Victory condition**: Give a topic, review the script, reject once to test loop, then approve! ğŸ‰

### Task 3: Build a console app

ğŸ“‚ [03.Application](../../../../../WorkshopForAgentic/code/02.Workflow/03.Application)

**Challenge**: Turn your workflow from DevUI into a slick terminal app with colored output, loading spinners, and file saving. This is production-ready!

**Skills youâ€™ll learn**:
- âš¡ Running workflows programmatically (no DevUI)
- ğŸ“¡ Event-driven architecture with streaming
- ğŸ¨ Creating nice terminal UI (colors, spinners, progress bars)
- ğŸ’¾ Saving final scripts to files
- ğŸ”„ Handling asynchronous workflows with Pythonâ€™s asyncio

**What it does**:
1. Asks you for your podcast topic
2. Shows live progress (â€œSearch agent working...â€)
3. Displays generated script in color
4. Requests your approval
5. Saves approved script to `podcast.txt`

**Code**:
- `podcast_app.py`: your main app with event handling
- `workflow.py`: reuse workflow from Task 2
- Handle events: `AgentRunUpdateEvent`, `RequestInfoEvent`, `WorkflowOutputEvent`
- Use ANSI colors for terminal styling

**Victory Condition**: Run the app, create a podcast script, and see it saved! You have built a real tool. ğŸš€

## What youâ€™ve mastered ğŸ†

After Act Two, you can:

- âœ… Orchestrate multiple AI agents like a boss
- âœ… Build workflows with sequential and conditional logic
- âœ… Add human approval checkpoints
- âœ… Test and debug workflows with DevUI
- âœ… Create production-ready console applications
- âœ… Gracefully handle errors in complex systems
- âœ… Choose the right orchestration pattern for any project

## When things go wrong ğŸ”§

### "My workflow is too complex!"
**Solution**: Break it down into smaller sub-workflows. Each workflow should do one thing well. Link them together if needed.

### "I canâ€™t keep track of whatâ€™s happening!"
**Solution**: Use workflow checkpoints to save state. Enable tracing in DevUI to see each step.

### "One agentâ€™s failure crashes everything!"
**Solution**: Add error boundaries. Each agent should handle its own failures and have fallback behaviors.

### "Itâ€™s too slow"
**Solution**: Are any agents able to run in parallel? Sequential workflows are easy but slow. Look for opportunities to parallelize!

## Useful resources ğŸ”—

- [Workflow Documentation](https://learn.microsoft.com/en-us/agent-framework/user-guide/workflows/overview) â€” Official Microsoft guide
- [Orchestration Patterns](https://www.ibm.com/think/topics/ai-agent-orchestration) â€” IBMâ€™s perspective
- [Agent Framework GitHub](https://github.com/microsoft/agent-framework) â€” Browse the source code
- [Code Samples](https://github.com/microsoft/agent-framework/tree/main/python/samples) â€” Steal patterns from here

---

**Ready for the grand finale?** You have the script. Now letâ€™s turn it into real audio! â†’ [Act Three: Bring Your Podcast to Life](03.Multi-SpeakerPodcastGenerationWithVibeVoice.md) ğŸ¤

---

**Stuck? Confused? Excited?** Share in the workshop chat! We learn together. ğŸš€

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
**Disclaimer**:
This document has been translated using the AI translation service [Co-op Translator](https://github.com/Azure/co-op-translator). While we strive for accuracy, please be aware that automated translations may contain errors or inaccuracies. The original document in its native language should be considered the authoritative source. For critical information, professional human translation is recommended. We are not liable for any misunderstandings or misinterpretations arising from the use of this translation.
<!-- CO-OP TRANSLATOR DISCLAIMER END -->